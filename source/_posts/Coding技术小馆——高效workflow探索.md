---
title: Coding技术小馆——高效workflow探索
date: 2018-01-20 17:00:00
tags: [Coding, workflow, 沙龙]
---

之前一直很疑惑：[Coding](https://coding.net/) 刚开始提供的代码托管服务跟[GitHub](https://github.com/) 很类似，那时GitHub就已经很成熟，并且拥有很大体量的用户，还是免费的，Coding这样的平台还能做什么，难道仅仅是做个中文版GitHub，这样的平台有什么竞争力，后续又通过怎样的方式来盈利......，从创立到现在3年多的时间这些疑惑的答案已经很明显了，Coding以为个人提供免费的代码托管服务为切入点，进而为小型互联网公司提供代码托管、项目管理、开发云平台等服务，后续可能还会提供系统部署、云服务器以及更多的服务，形成从开发、测试到最后部署的一条完整的产业链，为企业节省购买服务器、环境搭建等成本，进而收取相关服务费。现在还有一个很类似做得也很不错的平台——[码云](https://gitee.com/) 。

<!-- more -->

Coding 是2014年成立的以代码托管和项目管理为主的平台，刚开始只有代码托管的业务，跟大名鼎鼎的Github的功能很类似，我是因为之前有段时间GitHub被墙了，压根就访问不了，后来能访问，但访问速度也超慢，所以我这一块自留地的博客就在GitHub和Coding上各部署了一套，因此用了Coding上很小的一部分功能。

因为最近想在博客上添加评论的功能，而之前的免费的评论插件都已经陆续关掉了，还能使用的[畅言](https://changyan.kuaizhan.com/) 必须绑定顶级域名才能使用，所以近期申请并在Coding的Pages服务上绑定了[自己的域名](http://www.xiacw.cn/) ，恰逢Coding在深圳举办线下主题沙龙——高效workflow探索，就去开开眼界，学习学习。

![会场1](http://olywxnzqu.bkt.clouddn.com/image/coding-workflow/huichang1.jpg) 

![会场2](http://olywxnzqu.bkt.clouddn.com/image/coding-workflow/huichang2.jpg)   

### 一、场景式解读Git工作流

符合使用场景的工作流才是好的工作流；

根据协作人员数量和开发周期大致将使用场景分为以下四个：

![场景图](http://olywxnzqu.bkt.clouddn.com/image/coding-workflow/changjing.png) 

> 1. 小型外包项目：
>    - 项目周期短，团队沟通方便，code review 需求不强，基本上一条分支搞定；
> 2. 小型开源项目：
>    - 项目周期长，接收第三方贡献，code review需求强烈，有维护多版本需求；
> 3. 大型外包：
>    - 开发人员多，分模块并行开发，code review需求强烈；
> 4. 大型互联网项目：
>    - 项目周期长，开发人员多，code review需求强烈，有紧急修复和紧急上线需求；

当子分子与主分支的代码存在差异时的解决方法：

1. rebase（变基）；
2. 将主分支反向merge到子分支；

**code review** 

这一块反复提到一个概念——`code review(代码评审)` ，这个是我在团队开发中做的很不好的地方，我们现在做项目基本上没有做code review, 导致经常就会有一些因为不规范导致的问题。这个工作确实很有必要，但是在时间紧、任务中的显示大背景下，经常性的code review 又不太现实，这就需要找到一个平衡点。

**版本控制和自动部署**

这是Coding即将要开发上线的功能，将版本控制和自动部署结合在一起，这样就能让开发专注于写代码，测试专注于部署和测试，避免因版本未达成共识导致的问题，减少开发和测试之间的沟通成本。

**注重Git底层原理的理解**

任何时候都要知其然还要知其所以然，凡事去看看底层是怎样实现的，简单理解一下Git的底层实现原理：Git的一个标签，一个分支就是一个文件夹，但是为了节省空间，不会每建一个文件夹就拷贝一份全代码，而是存文件之间的差异，然后在需要时通过索引的形式进行组装。

**Git使用小技巧** 

1. 大型文件会严重拖慢Git性能，推荐使用Git LFS;
2. 用git bisect功能查找历史记录，定位bug；

### 二、全远程团队工作流探索

**全远程办公** 顾名思义就是不聚在一起集中办公，而是利用互联网工作的独特性进行远程写作办公的方式。一直以为这种工作方式只会在国外的互联网公司存在，没想到国内居然也有一些公司开始在用这种方式办公，想想就觉得很炫酷。原来真的可以一边朝九晚五，一边浪迹天涯，真的可以把工作变成一件浪漫的事：边旅游边工作。

**集中式办公的缺点**：

1. 因地域原因公司直接错过了在其他城市但各方面更符合岗位的员工；
2. 公司所在位置平均薪资水平的增加导致公司生存压力增加；
3. 在非一线城市的人更难找到好的公司、好同事；
4. 有经验、有能力的员工由于要照顾到家庭，不得已选择回家而离职；
5. 员工浪费在通勤时间较长，幸福感和工作效率不高；

**全远程的工作方式的优势** ：

1. 公司可以在更广阔的空间纬度上选择人才，同时公司的成本相对更低；
2. 员工可以有更多的时间陪伴家人；也有更多的时间、更好的心情来工作；
3. 甚至真的可以边旅游边工作，激发更多的创作灵感；

**全远程的工作方式存在的问题** ：

1. 招聘人员的风险更高：
   * 信任：择人更严格，出专业能力符合岗位要求外，还需要有强力的责任感和自律性，所以在招聘人员时优先选择通过兴趣的人员，一般通过GitHub上的开源项目进行寻找和筛选；
   * 纪律更严明，对诚信问题零容忍；
2. 沟通成本高；
3. 宅：因不是集中办公，员工的被动社交圈变窄，如果员工本来就比较宅，很容易变成死肥宅，继而引发各种健康问题。需要员工能主动的参与其他圈子。
4. 地域分散，团对建设更难，公司理念、方针的传达、贯彻相对困难；
5. 员工之间更难相互学习以共同提高；

**协同工具探讨** ：

basecamp:

1. 功能多，学习成本较高，不够直观——很多功能暂时用不到；
2. 需要刻意打理：需要符合特定流程；
3. 更适合大型、复杂的项目；

trello:

1. 简单易用、信息密度不够高，进阶功能操作繁琐，视图单一，无多项目汇总；

webhoook+脚本更新

**小结：**

虽然觉得这种全远程工作的方式很炫酷，但是还是觉得很遥远，因为茶歇沟通时了解了一下，zila团队算老板总共才6个人，稍大一点的团队，通过这种方式就很难管理了，并且这种方式也还存在很多实际的问题，近期还是不渴望了吧，毕竟我们现在是连弹性工作都实现不了的呀......，不过有一点是可以肯定的：利用业余的时间干点真正有意义，真正很酷炫，真正很geek的事情，做到极致或许就多了很多选择；

### 三、快速开发杂谈

快速：不是快速的写完代码，而是节约项目的总时间（调研、设计、开发、测试、部署、运维等）；

开发：从项目开始到后期的维护；

**开发前：** 

- 需求分析：花10%-20%的时间，有奇葩的需求可以，先指出来这样处理的不合理性和风险，并且需要增加成本；尝试沟通提出更好的方案既满足产品的需求又让开发能更快更好的完成（这不正是项目经理的职责吗）；
- Design view：保证架构是相对合理的；
- 团队规范：越细越好，最好团队写出来的代码就像一个人写的；
- 协作开发要在业务层面让划分的模块相对独立，这样能减少冲突；

**开发中：** 

- 工欲善其事必先利其器——选择切实好用的工具，并把自己的工具调到最优，让其出鞘就是利刃；
- [Mental Flow](https://baike.baidu.com/item/%E5%BF%83%E6%B5%81/9824097?fr=aladdin) （心流），多次听说过这个词，但是我自己貌似一直没有达到过（貌似有类似的经历），推荐[《深度工作》](https://baike.baidu.com/item/%E6%B7%B1%E5%BA%A6%E5%B7%A5%E4%BD%9C/21501834?fr=aladdin) 这本书；
- 沟通：在沟通中往往会陷入*不管对错，只争输赢* 的局面，沟通时好好说事，共同目标是让功能更合理，暴露风险、成本等；
- 不要用好的注释掩盖好的代码；

**后期维护：** 

- 持续部署与集成：程序员就应该用自动化工具干稳定高效的事情来偷懒，而用节省的时间去干更有趣的事情；
- 收集错误，逐步提高：从自己之前犯的错误中找问题，这样才能逐步提高；

**小结：** 

在现在做的项目中确实有很多地方做的不够好，如：在开发前没有花很多时间跟产品去沟通、梳理细节的需求（当然这里面有些客观的原因——需求不明确，原型与开发几乎是同步进行的......）；没有通过Design view梳理相对合理的架构；开发前没有制定严格的开发规范；没有阶段性的进行code review，在以后的项目中需要有计划的去执行。

### 四、想法

一直想自己基于互联网搭个环境用户管理自己的业余代码（包括一些家庭的文件——重要文件、照片等）类似于私有云，现在想到的是可以在阿里云上搭建gitlab仓库来管理个人代码和文件，有时间实践一下；

![笔记](http://olywxnzqu.bkt.clouddn.com/image/coding-workflow/note.jpg) 